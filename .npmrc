# Enforce pnpm workspace behavior and allow Turbo's lifecycle hooks if scripts are disabled
# This repo uses pnpm with workspaces.

# Prefer linking local workspace packages when available
prefer-workspace-packages=true
link-workspace-packages=true
shared-workspace-lockfile=true

# Make peer installs smoother across the monorepo
auto-install-peers=true
strict-peer-dependencies=false

# If scripts are disabled (e.g., CI with --ignore-scripts), allowlisted packages can still run their hooks
# Turbo occasionally performs postinstall tasks for optimal performance
# moved to pnpm-workspace.yaml: onlyBuiltDependencies (e.g., allow turbo)

public-hoist-pattern[]=*eslint*
public-hoist-pattern[]=prettier
public-hoist-pattern[]=typescript

# Reproducible installs across CI and dev
prefer-frozen-lockfile=true

# Prefer resolving to highest versions in monorepo to reduce duplication
resolution-mode=highest

# Speed up native module builds by caching side effects
side-effects-cache=true

# Speed up local dev by reusing local store when possible
prefer-offline=true

# Ensure workspace protocol is used when adding internal deps
save-workspace-protocol=true
