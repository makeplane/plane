# Plane Configuration for Hetzner Deployment
# Copy this file to .env and fill in your values

# ============================================
# Domain Configuration
# ============================================
DOMAIN_NAME=your-domain.com
# Or use your Hetzner server IP: DOMAIN_NAME=123.45.67.89
APP_DOMAIN=${DOMAIN_NAME}
WEB_URL=http://${DOMAIN_NAME}
APP_PROTOCOL=http
# For HTTPS: APP_PROTOCOL=https
SITE_ADDRESS=:80

# ============================================
# Database Configuration
# ============================================
# Option 1: Use the included PostgreSQL container
POSTGRES_USER=plane
POSTGRES_PASSWORD=your-secure-postgres-password
POSTGRES_DB=plane
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}

# Option 2: Use external PostgreSQL (Hetzner Managed Database)
# DATABASE_URL=postgresql://user:password@db.your-project.db.cloud.hetzner.com:5432/plane

# ============================================
# Redis Configuration
# ============================================
# Option 1: Use the included Redis container
REDIS_URL=redis://redis:6379

# Option 2: Use external Redis
# REDIS_URL=redis://your-redis-host:6379

# ============================================
# RabbitMQ Configuration
# ============================================
RABBITMQ_USER=plane
RABBITMQ_PASSWORD=your-secure-rabbitmq-password
RABBITMQ_VHOST=plane
AMQP_URL=amqp://${RABBITMQ_USER}:${RABBITMQ_PASSWORD}@rabbitmq:5672/${RABBITMQ_VHOST}

# ============================================
# S3 Storage Configuration
# ============================================
# Option 1: Use Hetzner Object Storage (S3-compatible)
AWS_REGION=fsn1
AWS_ACCESS_KEY_ID=your-hetzner-object-storage-access-key
AWS_SECRET_ACCESS_KEY=your-hetzner-object-storage-secret-key
AWS_S3_BUCKET_NAME=plane-uploads
AWS_S3_ENDPOINT_URL=https://fsn1.your-objectstorage.com
USE_MINIO=0

# Option 2: Use AWS S3
# AWS_REGION=us-east-1
# AWS_ACCESS_KEY_ID=your-aws-access-key
# AWS_SECRET_ACCESS_KEY=your-aws-secret-key
# AWS_S3_BUCKET_NAME=plane-uploads
# AWS_S3_ENDPOINT_URL=https://s3.us-east-1.amazonaws.com
# USE_MINIO=0

# Option 3: Use local MinIO (included container)
# AWS_REGION=us-east-1
# AWS_ACCESS_KEY_ID=minioadmin
# AWS_SECRET_ACCESS_KEY=minioadmin
# AWS_S3_BUCKET_NAME=plane-uploads
# AWS_S3_ENDPOINT_URL=http://minio:9000
# USE_MINIO=1

# ============================================
# Security Keys
# ============================================
# Generate secure random keys for production!
SECRET_KEY=your-django-secret-key-min-50-chars
LIVE_SERVER_SECRET_KEY=your-live-server-secret-key

# ============================================
# Frontend URLs (auto-configured, but can override)
# ============================================
NEXT_PUBLIC_API_BASE_URL=http://${DOMAIN_NAME}/api
NEXT_PUBLIC_ADMIN_BASE_URL=http://${DOMAIN_NAME}/god-mode
NEXT_PUBLIC_ADMIN_BASE_PATH=/god-mode
NEXT_PUBLIC_LIVE_BASE_URL=http://${DOMAIN_NAME}/live
NEXT_PUBLIC_LIVE_BASE_PATH=/live
NEXT_PUBLIC_SPACE_BASE_URL=http://${DOMAIN_NAME}/spaces
NEXT_PUBLIC_SPACE_BASE_PATH=/spaces
NEXT_PUBLIC_WEB_BASE_URL=http://${DOMAIN_NAME}

# ============================================
# File Upload Configuration
# ============================================
FILE_SIZE_LIMIT=5242880
# 5242880 = 5MB, 10485760 = 10MB, 52428800 = 50MB

# ============================================
# API Configuration
# ============================================
API_KEY_RATE_LIMIT=60/minute

# ============================================
# CORS Configuration
# ============================================
CORS_ALLOWED_ORIGINS=http://${DOMAIN_NAME},https://${DOMAIN_NAME}

# ============================================
# SSL/TLS Configuration (for HTTPS)
# ============================================
# For Let's Encrypt automatic SSL:
# CERT_EMAIL=your-email@example.com
# CERT_ACME_CA=https://acme-v02.api.letsencrypt.org/directory

# For DNS challenge (if needed):
# CERT_ACME_DNS=acme_dns cloudflare your-api-key

# ============================================
# Network Configuration
# ============================================
# Port mappings
HTTP_PORT=80
HTTPS_PORT=443

# Trusted proxies (for Hetzner load balancers)
TRUSTED_PROXIES=0.0.0.0/0

# ============================================
# Optional: Enable MinIO container
# ============================================
# To use local MinIO instead of external S3, add --profile minio when starting:
# docker compose --profile minio -f docker-compose.hetzner.yml up -d

