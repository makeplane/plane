# Dokploy Environment Configuration for Plane
# Copy this file to .env and fill in your values
# IMPORTANT: Change all passwords and secret keys!

# =============================================================================
# DOMAIN CONFIGURATION
# =============================================================================
# Your domain name (Dokploy will handle SSL via Let's Encrypt)
APP_DOMAIN=your-domain.com
WEB_URL=https://your-domain.com

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL settings
POSTGRES_USER=plane
POSTGRES_PASSWORD=CHANGE_THIS_SECURE_PASSWORD
POSTGRES_DB=plane
PGHOST=plane-db
POSTGRES_PORT=5432
DATABASE_URL=postgresql://plane:CHANGE_THIS_SECURE_PASSWORD@plane-db:5432/plane

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_HOST=plane-redis
REDIS_PORT=6379
REDIS_URL=redis://plane-redis:6379/

# =============================================================================
# RABBITMQ CONFIGURATION
# =============================================================================
RABBITMQ_HOST=plane-mq
RABBITMQ_PORT=5672
RABBITMQ_USER=plane
RABBITMQ_PASSWORD=CHANGE_THIS_SECURE_PASSWORD
RABBITMQ_VHOST=plane

# =============================================================================
# MINIO / S3 STORAGE CONFIGURATION
# =============================================================================
USE_MINIO=1
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=CHANGE_THIS_ACCESS_KEY
AWS_SECRET_ACCESS_KEY=CHANGE_THIS_SECRET_KEY
AWS_S3_ENDPOINT_URL=http://plane-minio:9000
AWS_S3_BUCKET_NAME=uploads
MINIO_ENDPOINT_SSL=0

# Maximum file upload size (in bytes) - 5MB default
FILE_SIZE_LIMIT=5242880

# =============================================================================
# APPLICATION SECRETS
# =============================================================================
# Django secret key (generate a strong random string)
SECRET_KEY=CHANGE_THIS_TO_A_LONG_RANDOM_STRING_60_CHARS_MIN

# Live collaboration server secret
LIVE_SERVER_SECRET_KEY=CHANGE_THIS_TO_RANDOM_32_CHARS

# =============================================================================
# SECURITY & CORS
# =============================================================================
# Allowed origins for CORS (your domain)
CORS_ALLOWED_ORIGINS=https://your-domain.com

# Trusted proxies (for Dokploy's Traefik)
TRUSTED_PROXIES=0.0.0.0/0

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
# Debug mode (0 for production, 1 for development)
DEBUG=0

# Number of Gunicorn workers (2-4 recommended)
GUNICORN_WORKERS=2

# API rate limiting
API_KEY_RATE_LIMIT=60/minute

# =============================================================================
# OPTIONAL: EXTERNAL SERVICES
# =============================================================================
# If using external S3 instead of MinIO, uncomment and configure:
# USE_MINIO=0
# AWS_REGION=us-east-1
# AWS_ACCESS_KEY_ID=your-aws-key
# AWS_SECRET_ACCESS_KEY=your-aws-secret
# AWS_S3_BUCKET_NAME=your-bucket-name

# =============================================================================
# SCALING (Optional - leave as defaults for single server)
# =============================================================================
# WEB_REPLICAS=1
# SPACE_REPLICAS=1
# ADMIN_REPLICAS=1
# API_REPLICAS=1
# WORKER_REPLICAS=1
# BEAT_WORKER_REPLICAS=1
# LIVE_REPLICAS=1

# =============================================================================
# IMPORTANT NOTES
# =============================================================================
# 1. All telemetry and licensing code has been removed
# 2. You're running Enterprise Edition with all features enabled
# 3. Dokploy's Traefik will handle SSL/TLS automatically
# 4. Make sure to change ALL passwords and secrets above!
# 5. Generate strong random strings for SECRET_KEY and LIVE_SERVER_SECRET_KEY

# Generate secret keys with:
# python -c "import secrets; print(secrets.token_hex(32))"
